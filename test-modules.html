<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Module Test - TRE CRM</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			max-width: 800px;
			margin: 50px auto;
			padding: 20px;
			background: #f5f5f5;
		}
		.test-section {
			background: white;
			padding: 20px;
			margin-bottom: 20px;
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0,0,0,0.1);
		}
		h1 {
			color: #153e7a;
		}
		h2 {
			color: #333;
			border-bottom: 2px solid #153e7a;
			padding-bottom: 10px;
		}
		.test-result {
			padding: 10px;
			margin: 10px 0;
			border-radius: 4px;
		}
		.test-result.pass {
			background: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
		}
		.test-result.fail {
			background: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
		}
		button {
			background: #153e7a;
			color: white;
			border: none;
			padding: 10px 20px;
			border-radius: 4px;
			cursor: pointer;
			margin: 5px;
		}
		button:hover {
			background: #0f2d5c;
		}
		.modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.5);
			justify-content: center;
			align-items: center;
		}
		.modal.show {
			display: flex;
		}
		.modal-content {
			background: white;
			padding: 30px;
			border-radius: 8px;
			max-width: 400px;
		}
		.hidden {
			display: none !important;
		}
		.toast {
			position: fixed;
			top: 20px;
			right: 20px;
			padding: 15px 20px;
			border-radius: 4px;
			color: white;
			font-weight: 500;
			opacity: 0;
			transform: translateY(-20px);
			transition: all 0.3s ease;
			z-index: 10000;
		}
		.toast.show {
			opacity: 1;
			transform: translateY(0);
		}
		.toast-success {
			background: #28a745;
		}
		.toast-error {
			background: #dc3545;
		}
		.toast-info {
			background: #17a2b8;
		}
		.toast-warning {
			background: #ffc107;
			color: #333;
		}
	</style>
</head>
<body>
	<h1>üß™ TRE CRM Module Tests</h1>
	
	<div class="test-section">
		<h2>Helper Functions Test</h2>
		<div id="helperTests"></div>
		<button onclick="testHelpers()">Run Helper Tests</button>
		<button onclick="testToast()">Test Toast</button>
		<button onclick="testModal()">Test Modal</button>
	</div>

	<div class="test-section">
		<h2>Validator Functions Test</h2>
		<div id="validatorTests"></div>
		<button onclick="testValidators()">Run Validator Tests</button>
	</div>

	<!-- Test Modal -->
	<div id="testModal" class="modal hidden">
		<div class="modal-content">
			<h3>Test Modal</h3>
			<p>This is a test modal!</p>
			<button onclick="closeTestModal()">Close</button>
		</div>
	</div>

	<script type="module">
		// Import modules
		import * as helpers from './src/utils/helpers.js';
		import * as validators from './src/utils/validators.js';

		// Make functions available globally for onclick handlers
		window.helpers = helpers;
		window.validators = validators;

		// Helper Tests
		window.testHelpers = function() {
			const results = [];
			const container = document.getElementById('helperTests');

			// Test formatDate
			const testDate = '2024-01-15T10:30:00Z';
			const formatted = helpers.formatDate(testDate);
			results.push({
				name: 'formatDate',
				pass: formatted.includes('2024'),
				message: `formatDate: ${formatted}`
			});

			// Test generateId
			const id = helpers.generateId('test');
			results.push({
				name: 'generateId',
				pass: id.startsWith('test_'),
				message: `generateId: ${id}`
			});

			// Test isEmpty
			results.push({
				name: 'isEmpty (empty string)',
				pass: helpers.isEmpty(''),
				message: 'isEmpty("") = true'
			});

			results.push({
				name: 'isEmpty (non-empty)',
				pass: !helpers.isEmpty('test'),
				message: 'isEmpty("test") = false'
			});

			// Test formatCurrency
			const currency = helpers.formatCurrency(1234.56);
			results.push({
				name: 'formatCurrency',
				pass: currency.includes('$') && currency.includes('1,234'),
				message: `formatCurrency(1234.56) = ${currency}`
			});

			// Test formatPhone
			const phone = helpers.formatPhone('1234567890');
			results.push({
				name: 'formatPhone',
				pass: phone.includes('(123)'),
				message: `formatPhone("1234567890") = ${phone}`
			});

			// Test capitalize
			const cap = helpers.capitalize('hello');
			results.push({
				name: 'capitalize',
				pass: cap === 'Hello',
				message: `capitalize("hello") = ${cap}`
			});

			// Test truncate
			const trunc = helpers.truncate('This is a long string', 10);
			results.push({
				name: 'truncate',
				pass: trunc.length <= 13 && trunc.includes('...'),
				message: `truncate("This is a long string", 10) = ${trunc}`
			});

			// Display results
			container.innerHTML = results.map(r => `
				<div class="test-result ${r.pass ? 'pass' : 'fail'}">
					${r.pass ? '‚úÖ' : '‚ùå'} ${r.message}
				</div>
			`).join('');
		};

		// Validator Tests
		window.testValidators = function() {
			const results = [];
			const container = document.getElementById('validatorTests');

			// Test isValidEmail
			results.push({
				name: 'isValidEmail (valid)',
				pass: validators.isValidEmail('test@example.com'),
				message: 'isValidEmail("test@example.com") = true'
			});

			results.push({
				name: 'isValidEmail (invalid)',
				pass: !validators.isValidEmail('invalid-email'),
				message: 'isValidEmail("invalid-email") = false'
			});

			// Test isValidPhone
			results.push({
				name: 'isValidPhone (valid)',
				pass: validators.isValidPhone('1234567890'),
				message: 'isValidPhone("1234567890") = true'
			});

			results.push({
				name: 'isValidPhone (invalid)',
				pass: !validators.isValidPhone('123'),
				message: 'isValidPhone("123") = false'
			});

			// Test isRequired
			results.push({
				name: 'isRequired (filled)',
				pass: validators.isRequired('test'),
				message: 'isRequired("test") = true'
			});

			results.push({
				name: 'isRequired (empty)',
				pass: !validators.isRequired(''),
				message: 'isRequired("") = false'
			});

			// Test minLength
			results.push({
				name: 'minLength (pass)',
				pass: validators.minLength('testing', 5),
				message: 'minLength("testing", 5) = true'
			});

			results.push({
				name: 'minLength (fail)',
				pass: !validators.minLength('test', 10),
				message: 'minLength("test", 10) = false'
			});

			// Test isValidUrl
			results.push({
				name: 'isValidUrl (valid)',
				pass: validators.isValidUrl('https://example.com'),
				message: 'isValidUrl("https://example.com") = true'
			});

			results.push({
				name: 'isValidUrl (invalid)',
				pass: !validators.isValidUrl('not-a-url'),
				message: 'isValidUrl("not-a-url") = false'
			});

			// Test isValidDate
			results.push({
				name: 'isValidDate (valid)',
				pass: validators.isValidDate('2024-01-15'),
				message: 'isValidDate("2024-01-15") = true'
			});

			results.push({
				name: 'isValidDate (invalid)',
				pass: !validators.isValidDate('invalid-date'),
				message: 'isValidDate("invalid-date") = false'
			});

			// Test validatePassword
			const pwdResult = validators.validatePassword('Test123!@#');
			results.push({
				name: 'validatePassword (strong)',
				pass: pwdResult.isValid && pwdResult.strength === 'strong',
				message: `validatePassword("Test123!@#") = ${pwdResult.strength}`
			});

			// Display results
			container.innerHTML = results.map(r => `
				<div class="test-result ${r.pass ? 'pass' : 'fail'}">
					${r.pass ? '‚úÖ' : '‚ùå'} ${r.message}
				</div>
			`).join('');
		};

		// Toast Test
		window.testToast = function() {
			helpers.toast('Success toast!', 'success');
			setTimeout(() => helpers.toast('Error toast!', 'error'), 1000);
			setTimeout(() => helpers.toast('Info toast!', 'info'), 2000);
			setTimeout(() => helpers.toast('Warning toast!', 'warning'), 3000);
		};

		// Modal Test
		window.testModal = function() {
			helpers.showModal('testModal');
		};

		window.closeTestModal = function() {
			helpers.hideModal('testModal');
		};

		// Auto-run tests on load
		console.log('‚úÖ Modules loaded successfully!');
		console.log('Helpers:', Object.keys(helpers));
		console.log('Validators:', Object.keys(validators));
	</script>
</body>
</html>

